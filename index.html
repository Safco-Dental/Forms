<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bug Report | Safco Forms</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <style>
        header{
            background-color:#5673b8;
            color:white;
            padding:30px 0;
        }
    </style>
    <link rel="icon" type="image/x-icon" href="./favicon.png">
</head>
<body>

    <header>
        <h1 class="text-center" >
            Bug Report | Safco Forms
        </h1>
    </header>

    <main>
        <section  class="container mt-3 mb-5">

            <nav class="my-3">
                <ul class="nav nav-tabs">
                    <li class="nav-item"><a class="nav-link active" href="#">Bug Report</a></li>
                    <li class="nav-item"><a class="nav-link" href="feature.html">Feature Request</a></li>
                </ul>
            </nav>


            <form id="issueForm" method="POST" enctype="multipart/form-data">
                <div class="mb-3">
                    <label for="bug_title" class="form-label">Bug Title <span class="text-danger" >*</span></label>
                    <input type="text" class="form-control" id="bug_title" placeholder="Bug Title" required />
                </div>

                <div class="mb-3">
                    <label for="safco_employee_name" class="form-label">Safco Employee Name <span class="text-danger" >*</span></label>
                    <input type="text" class="form-control" id="safco_employee_name" placeholder="e.g Mario Kirolos" required />
                </div>


                <div class="mb-3">
                    <label for="safco_employee_email" class="form-label">Safco Employee Email <span class="text-danger" >*</span></label>
                    <input type="text" class="form-control" id="safco_employee_email" placeholder="e.g mkirolos@safcodental.com" required />
                </div>

                <div class="mb-3">
                    <label for="date_of_issue" class="form-label">Date of issue <span class="text-danger" >*</span></label>
                    <input type="date" class="form-control" id="date_of_issue" placeholder="12/31/2024" required />
                </div>

                <div class="mb-3">
                    <label for="issue_headline" class="form-label">Issue Headline</label>
                    <select class="form-select" id="issue_headline" aria-label="Issue Headline">
                        <option selected>None</option>
                        <option value="login">Login</option>
                        <option value="search">Search</option>
                        <option value="cart">Cart</option>
                        <option value="promo">Promo</option>
                        <option value="navigation">Navitagion</option>
                        <option value="other">Others</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label for="what_happend" class="form-label">What happened? <span class="text-danger" >*</span></label>
                    <textarea class="form-control" id="what_happend" rows="3" required placeholder="Tell us what you see!"></textarea>
                </div>


                <div class="mb-3">
                    <label for="related_project" class="form-label">Related Project</label>
                    <select class="form-select" id="related_project" aria-label="Related Project">
                        <option value="main-website">Main Website</option>
                        <option value="beta">Beta</option>
                        <option value="hubspot">Hubspot</option>
                        <option value="internal-app">Internal App</option>
                        <option value="background-process">Background Process</option>
                        <option value="other">Others</option>
                    </select>
                </div>


                <div class="mb-3">
                    <label for="priority" class="form-label">Priority</label>
                    <select class="form-select" id="priority" aria-label="Priority">
                        <option value="low">Low</option>
                        <option value="medium">Medium</option>
                        <option value="high">High</option>
                    </select>
                </div>

                <hr  class="my-5"/>


                <h3>Customer Information</h3>

                <div class="mb-3">
                    <label for="customer_number_or_email" class="form-label">Customer Number or Email Address <span class="text-danger" >*</span></label>
                    <input type="text" class="form-control" id="customer_number_or_email" placeholder="e.g 30007" required />
                </div>


                <div class="mb-3">
                    <label for="order_number" class="form-label">Order number</label>
                    <input type="text" class="form-control" id="order_number" placeholder="e.g 123456" />
                </div>


                <div class="mb-3">
                    <label for="browser_of_issue" class="form-label">What browsers are you seeing the problem on?</label>
                    <select multiple class="form-select" id="browser_of_issue" aria-label="What browsers are you seeing the problem on?">
                        <option value="firefox">Firefox</option>
                        <option value="chrome">Chrome</option>
                        <option value="Edge">Edge</option>
                        <option value="other">Other</option>
                        <option value="NA">NA</option>
                    </select>
                    <small>Choose multiple</small>
                </div>


                <div class="mb-3">
                    <label for="steps_to_reproduce" class="form-label">Steps to Reproduce<span class="text-danger" >*</span></label>
                    <textarea class="form-control" id="steps_to_reproduce" rows="3" required placeholder="1- Go to https://www.safcodental.com
2- Hover over Products Menu
3- Unable to see the list while logged in"></textarea>
                </div>


                <div class="mb-3">
                    <label for="files" class="form-label">Files</label>
                    <input type="file" multiple name="files" id="files" />
                    <small>Any Helpful information that would help us deliver faster</small>
                </div>

                <section id="response" class="alert"></section>

                <button class="btn btn-info" type="submit">Submit Issue</button>
            </form>
        </section>

    </main>


    <script>
        const form = document.getElementById('issueForm');
        form.addEventListener('submit', async function(event) {
            event.preventDefault();

            const title = document.getElementById('bug_title').value;
            const safco_employee_name = document.getElementById('safco_employee_name').value;
            const safco_employee_email = document.getElementById('safco_employee_email').value;
            const date_of_issue = document.getElementById('date_of_issue').value;
            const issue_headline = document.getElementById('issue_headline').value || 'N.A';
            const what_happend = document.getElementById('what_happend').value;
            const related_project = document.getElementById('related_project').value;
            const priority = document.getElementById('priority').value;
            const customer_number_or_email = document.getElementById('customer_number_or_email').value;
            const order_number = document.getElementById('order_number').value || 'N.A';
            const browser_of_isse = Array.from(document.querySelectorAll('#browser_of_isse option:checked')).map(option => option.value) || 'N.A';
            const steps_to_reproduce = document.getElementById('steps_to_reproduce').value;

            const formTemplate = `## Bug Report\n\n**Title**: ${title}\n\n**Safco Employee Name**: ${safco_employee_name}\n\n**Safco Employee Email**: ${safco_employee_email}\n\n**Date of Issue**: ${date_of_issue}\n\n**Issue Headline**: ${issue_headline}\n\n**What happened**:\n ${what_happend}\n\n**Related Project**: ${related_project}\n\n**Priority**: ${priority}\n\n**Customer Number or Email**: ${customer_number_or_email}\n\n**Order Number**: ${order_number}\n\n**Browser of Issue**: ${browser_of_isse}\n\n**Steps to Reproduce**:\n ${steps_to_reproduce}`;

            // Create FormData object
            const formData = new FormData();
            formData.append('title', '[Bug]: ' + title);
            formData.append('body', formTemplate);
            formData.append('assignees', 'mkirolos-safco');
            formData.append('labels', 'bug');

            // Append files
            const filesInput = document.getElementById('files');
            for (const file of filesInput.files) {
                formData.append('files', file);
            }

            const response = await submitData(formData)
        });
    </script>
    <script src="./script.js" ></script>
</body>
</html>
