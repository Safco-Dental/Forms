<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feature Request | Safco Forms</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <style>
        header{
            background-color:#5673b8;
            color:white;
            padding:30px 0;
        }
    </style>
    <link rel="icon" type="image/x-icon" href="./favicon.png">
</head>
<body>

    <header>
        <h1 class="text-center" >
            Feature Request | Safco Forms
        </h1>
    </header>

    <main>
        <section  class="container mt-3 mb-5">
            <nav class="my-3">
                <ul class="nav nav-tabs">
                    <li class="nav-item"><a class="nav-link" href="index.html">Bug Report</a></li>
                    <li class="nav-item"><a class="nav-link active" href="#">Feature Request</a></li>
                </ul>
            </nav>


            <form id="featureRequestForm" action="https://api.safcodental.com/forms-submission/submit-issue" method="POST">

                <div class="mb-3">
                    <label for="feature_title" class="form-label">Feature Title <span class="text-danger" >*</span></label>
                    <input type="text" class="form-control" id="feature_title" placeholder="Feature Title" required />
                </div>

                <div class="mb-3">
                    <label for="safco_employee_name" class="form-label">Safco Employee Name <span class="text-danger" >*</span></label>
                    <input type="text" class="form-control" id="safco_employee_name" placeholder="e.g Mario Kirolos" required />
                </div>


                <div class="mb-3">
                    <label for="safco_employee_email" class="form-label">Safco Employee Email <span class="text-danger" >*</span></label>
                    <input type="text" class="form-control" id="safco_employee_email" placeholder="e.g mkirolos@safcodental.com" required />
                </div>

                <div class="mb-3">
                    <label for="department" class="form-label">Department</label>
                    <select class="form-select" id="department" aria-label="Department">
                        <option selected>None</option>
                        <option value="accounting">Accounting</option>
                        <option value="creative">Creative</option>
                        <option value="customer-service">Customer Service</option>
                        <option value="distribution-center">Distribution Center</option>
                        <option value="it">IT</option>
                        <option value="marketing">Marketing</option>
                        <option value="purchasing-product-development">Purchasing/Product Development</option>
                    </select>
                </div>


                <div class="mb-3">
                    <label for="request_title" class="form-label">Request Title <span class="text-danger" >*</span></label>
                    <input type="text" class="form-control" id="request_title" placeholder="Request Title" required />
                </div>

                <div class="mb-3">
                    <label for="short_desc" class="form-label">Short Description? <span class="text-danger" >*</span></label>
                    <textarea class="form-control" id="short_desc" rows="3" required placeholder="Tell us about your request (issues, improvements, etc.)"></textarea>
                </div>

                <div class="mb-3">
                    <label for="benefits_outcomes" class="form-label">Benefits/Outcomes <span class="text-danger" >*</span></label>
                    <textarea class="form-control" id="benefits_outcomes" rows="3" required placeholder="Tell us the expected benefit this will provide. Include benefits that affect other departments as well."></textarea>
                </div>


                <div class="mb-3">
                    <label for="related_project" class="form-label">Related Project</label>
                    <select class="form-select" id="related_project" aria-label="Related Project">
                        <option value="main-website">Main Website</option>
                        <option value="beta">Beta</option>
                        <option value="hubspot">Hubspot</option>
                        <option value="internal-app">Internal App</option>
                        <option value="background-process">Background Process</option>
                        <option value="other">Others</option>
                    </select>
                </div>


                <div class="mb-3">
                    <label for="priority" class="form-label">Priority</label>
                    <select class="form-select" id="priority" aria-label="Priority">
                        <option value="low">Low</option>
                        <option value="medium">Medium</option>
                        <option value="high">High</option>
                    </select>
                </div>


                <div class="mb-3">
                    <label for="request_completion_date" class="form-label">Requested Completion Date <span class="text-danger" >*</span></label>
                    <input type="date" class="form-control" id="request_completion_date" placeholder="12/31/2024" required />
                </div>


                <button class="btn btn-info" type="submit">Submit Request</button>
            </form>
        </section>

    </main>


    <script>
        const form = document.getElementById('featureRequestForm');
        form.addEventListener('submit', async function(event) {
            event.preventDefault();

            const title = document.getElementById('feature_title').value;
            const safco_employee_name = document.getElementById('safco_employee_name').value;
            const safco_employee_email = document.getElementById('safco_employee_email').value;
            const department = document.getElementById('department').value;
            const request_title = document.getElementById('request_title').value;
            const short_desc = document.getElementById('short_desc').value;
            const benefits_outcomes = document.getElementById('benefits_outcomes').value;
            const related_project = document.getElementById('related_project').value;
            const priority = document.getElementById('priority').value;
            const request_completion_date = document.getElementById('request_completion_date').value;

            const formTemplate = `## Feature Request\n\n**Title**: ${title}\n\n**Safco Employee Name**: ${safco_employee_name}\n\n**Safco Employee Email**: ${safco_employee_email}\n\n**Department**: ${department}\n\n**Request Title**: ${request_title}\n\n**Short Description**:\n ${short_desc}\n\n**Benefits/Outcomes**: ${benefits_outcomes}\n\n**Related Project**: ${related_project}\n\n**Priority**: ${priority}\n\n**Request Completion Date**: ${request_completion_date}\n\n`;


            const response = await fetch('https://api.safcodental.com/forms-submission/submit-issue', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    title: '[Feature]: ' + title,
                    body: formTemplate,
                    assignees: ['mkirolos-safco'],
                    labels: ['enhancement']
                })
            });

            if (response.ok) {
                alert('Issue created successfully!');
                form.reset();
            } else {
                alert('Failed to create issue.');
            }
        });
    </script>
</body>
</html>
